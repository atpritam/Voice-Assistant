
================================================================================
TESTING SPECIFIC INCORRECT PREDICTIONS WITH DETAILED LOGGING
================================================================================

2025-10-29 10:49:34 [IntentRecognizer]  Algorithmic layer initialized
2025-10-29 10:49:34 [Semantic] Loading Sentence Transformer model on device: GPU
2025-10-29 10:49:37 [Semantic] Loaded embeddings from cache for 6 intents, total patterns: 240
2025-10-29 10:49:37 [IntentRecognizer]  Semantic layer initialized (model: all-mpnet-base-v2)
2025-10-29 10:49:37 [LLM] Connected to local Ollama at http://localhost:11434
2025-10-29 10:49:37 [LLM] Using model: llama3.2:3b-instruct-q4_K_M
2025-10-29 10:49:37 [IntentRecognizer]  LLM layer initialized (Ollama, model: llama3.2:3b-instruct-q4_K_M)

Configuration:
  Semantic Model: all-mpnet-base-v2
  Algorithmic Threshold: 0.6
  Semantic Threshold: 0.5
  Boost Engine logging: ENABLED


================================================================================
Query: 'Can you take my order?'
Expected Intent: order
--------------------------------------------------------------------------------
2025-10-29 10:49:37 [IntentRecognizer] ------------------------------------------------------------
2025-10-29 10:49:37 [IntentRecognizer] Processing: 'Can you take my order?'
2025-10-29 10:49:37 [IntentRecognizer] ------------------------------------------------------------
2025-10-29 10:49:37 [Algorithmic] Candidate intents: ['delivery', 'general', 'menu_inquiry', 'hours_location', 'complaint', 'order']
2025-10-29 10:49:37 [boostEngine] Order action boost: 0.569 -> 0.769
2025-10-29 10:49:37 [Algorithmic] delivery (0.775, medium, levenshtein)
2025-10-29 10:49:37 [IntentRecognizer] ✓ ACCEPTED ALGORITHMIC Layer: delivery (0.775, medium)

FINAL RESULT:
  Predicted: delivery
  Confidence: 0.775
  Layer: algorithmic
  Match: ✗ INCORRECT

  Score Breakdown:
    keyword_similarity: 0.462
    exact_overlap: 0.429
    synonym_similarity: 0.538
    levenshtein_similarity: 0.829
    phrase_bonus: 0.050
    keyword_bonus: 0.080
    base_score: 0.645
    final_score: 0.775
================================================================================

================================================================================
Query: 'The delivery took forever'
Expected Intent: complaint
--------------------------------------------------------------------------------
2025-10-29 10:49:37 [IntentRecognizer] ------------------------------------------------------------
2025-10-29 10:49:37 [IntentRecognizer] Processing: 'The delivery took forever'
2025-10-29 10:49:37 [IntentRecognizer] ------------------------------------------------------------
2025-10-29 10:49:37 [Algorithmic] Candidate intents: ['delivery', 'complaint', 'hours_location', 'menu_inquiry', 'order']
2025-10-29 10:49:37 [Algorithmic] delivery (0.544, low, keyword + levenshtein)
2025-10-29 10:49:37 [IntentRecognizer]   - Proceeding to Semantic layer
2025-10-29 10:49:37 [Semantic] delivery (0.682, medium)
2025-10-29 10:49:37 [IntentRecognizer] ✓ ACCEPTED SEMANTIC Layer: delivery (0.682, medium)

FINAL RESULT:
  Predicted: delivery
  Confidence: 0.682
  Layer: semantic
  Match: ✗ INCORRECT

  Score Breakdown:
    semantic_similarity: 0.682
    matched_pattern: How much longer for delivery?
    top_k_patterns: ['How much longer for delivery?', 'How long does delivery take?', "What's the fastest delivery option?"]
    top_k_scores: [0.7055373787879944, 0.6856116056442261, 0.6158886551856995]
    all_similarities: {'What are your delivery options?': 0.4929260015487671, 'How long does delivery take?': 0.6856116056442261, "What's the delivery time?": 0.6156466007232666, 'Can I track my order?': 0.24450793862342834, 'Where is my order?': 0.40903425216674805, "What's my order status?": 0.3108166456222534, 'Do you have free delivery?': 0.425057590007782, 'How do I track my delivery?': 0.39889103174209595, "What's the minimum order for delivery?": 0.5202010869979858, 'Do you deliver to my area?': 0.3491578996181488, 'How much is delivery?': 0.5241513252258301, 'When will my order arrive?': 0.49280881881713867, 'What is the status of my order delivery?': 0.5248071551322937, 'Track my pizza': 0.21854820847511292, 'Where is my pizza?': 0.34378063678741455, 'How long until my order arrives?': 0.5160351991653442, "What's the estimated delivery time?": 0.5977888107299805, 'Can you check on my delivery?': 0.5309069156646729, 'Is my order on the way?': 0.4284206032752991, 'Do you do late night delivery?': 0.39375847578048706, 'How much longer for delivery?': 0.7055373787879944, "What's the delivery fee?": 0.42305266857147217, 'Do you charge for delivery?': 0.41430026292800903, 'Is delivery free over a certain amount?': 0.3607477843761444, "What's your delivery range?": 0.4241275191307068, 'Are you in my delivery zone?': 0.3989325165748596, 'Delivery time estimate': 0.6086028814315796, "What's the minimum order value?": 0.056360527873039246, 'Is there a delivery minimum?': 0.5124608278274536, 'Do you have real-time tracking?': 0.16887396574020386, 'Can I see where the driver is?': 0.02835387922823429, "What's the fastest delivery option?": 0.6158886551856995, 'Can I cancel my delivery?': 0.5179767608642578, 'Is delivery available during holidays?': 0.4482463598251343, 'What payment methods for delivery?': 0.31571727991104126, 'I gave the wrong address': 0.3028023838996887, 'Update my delivery location': 0.36764857172966003, 'Can the driver call me?': 0.12402791529893875, 'How do I contact the driver?': 0.1877201795578003, "What if I'm not home?": 0.16335389018058777, 'What is the estimated time for delivery?': 0.595389723777771, 'What is the ETA?': 0.29027605056762695, 'Can you leave it at the door?': 0.15769919753074646, 'Do you offer contactless delivery?': 0.3433361053466797, 'Can I meet the driver outside?': 0.115137979388237}
================================================================================

================================================================================
Query: 'Do you have late night hours?'
Expected Intent: hours_location
--------------------------------------------------------------------------------
2025-10-29 10:49:37 [IntentRecognizer] ------------------------------------------------------------
2025-10-29 10:49:37 [IntentRecognizer] Processing: 'Do you have late night hours?'
2025-10-29 10:49:37 [IntentRecognizer] ------------------------------------------------------------
2025-10-29 10:49:37 [Algorithmic] Candidate intents: ['hours_location', 'menu_inquiry', 'general', 'delivery', 'complaint']
2025-10-29 10:49:37 [boostEngine] Negative sentiment boost (x1): 0.147 -> 0.347
2025-10-29 10:49:37 [boostEngine] Delivery status boost: 0.697 -> 0.947
2025-10-29 10:49:37 [Algorithmic] delivery (0.947, high, levenshtein)
2025-10-29 10:49:37 [IntentRecognizer] ✓ ACCEPTED ALGORITHMIC Layer: delivery (0.947, high)

FINAL RESULT:
  Predicted: delivery
  Confidence: 0.947
  Layer: algorithmic
  Match: ✗ INCORRECT

  Score Breakdown:
    keyword_similarity: 0.432
    exact_overlap: 0.571
    synonym_similarity: 0.108
    levenshtein_similarity: 0.702
    phrase_bonus: 0.050
    keyword_bonus: 0.080
    base_score: 0.567
    final_score: 0.697
================================================================================

================================================================================
Query: 'How do I get to your location'
Expected Intent: hours_location
--------------------------------------------------------------------------------
2025-10-29 10:49:37 [IntentRecognizer] ------------------------------------------------------------
2025-10-29 10:49:37 [IntentRecognizer] Processing: 'How do I get to your location'
2025-10-29 10:49:37 [IntentRecognizer] ------------------------------------------------------------
2025-10-29 10:49:37 [Algorithmic] Candidate intents: ['order', 'hours_location', 'menu_inquiry', 'delivery', 'complaint', 'general']
2025-10-29 10:49:37 [Algorithmic] delivery (0.574, low, keyword + levenshtein)
2025-10-29 10:49:37 [IntentRecognizer]   - Proceeding to Semantic layer
2025-10-29 10:49:37 [Semantic] delivery (0.502, low)
2025-10-29 10:49:37 [IntentRecognizer] ✓ ACCEPTED SEMANTIC Layer: delivery (0.502, low)

FINAL RESULT:
  Predicted: delivery
  Confidence: 0.502
  Layer: semantic
  Match: ✗ INCORRECT

  Score Breakdown:
    semantic_similarity: 0.502
    matched_pattern: Update my delivery location
    top_k_patterns: ['Update my delivery location', 'I gave the wrong address', 'Do you deliver to my area?']
    top_k_scores: [0.5559775829315186, 0.46514326333999634, 0.42130935192108154]
    all_similarities: {'What are your delivery options?': 0.36268794536590576, 'How long does delivery take?': 0.24721601605415344, "What's the delivery time?": 0.2653355002403259, 'Can I track my order?': 0.32726916670799255, 'Where is my order?': 0.38291749358177185, "What's my order status?": 0.26719677448272705, 'Do you have free delivery?': 0.3219749331474304, 'How do I track my delivery?': 0.41185396909713745, "What's the minimum order for delivery?": 0.1938531994819641, 'Do you deliver to my area?': 0.42130935192108154, 'How much is delivery?': 0.32568904757499695, 'When will my order arrive?': 0.3184409737586975, 'What is the status of my order delivery?': 0.2932237684726715, 'Track my pizza': 0.3819824755191803, 'Where is my pizza?': 0.3146624267101288, 'How long until my order arrives?': 0.2680094838142395, "What's the estimated delivery time?": 0.21451842784881592, 'Can you check on my delivery?': 0.36712712049484253, 'Is my order on the way?': 0.3194107711315155, 'Do you do late night delivery?': 0.17364734411239624, 'How much longer for delivery?': 0.2052268385887146, "What's the delivery fee?": 0.3254728317260742, 'Do you charge for delivery?': 0.2503303289413452, 'Is delivery free over a certain amount?': 0.1598273664712906, "What's your delivery range?": 0.2856905162334442, 'Are you in my delivery zone?': 0.32109153270721436, 'Delivery time estimate': 0.2165273129940033, "What's the minimum order value?": 0.03397960588335991, 'Is there a delivery minimum?': 0.13093315064907074, 'Do you have real-time tracking?': 0.30240920186042786, 'Can I see where the driver is?': 0.23553228378295898, "What's the fastest delivery option?": 0.250049352645874, 'Can I cancel my delivery?': 0.17197491228580475, 'Is delivery available during holidays?': 0.16235855221748352, 'What payment methods for delivery?': 0.27279478311538696, 'I gave the wrong address': 0.46514326333999634, 'Update my delivery location': 0.5559775829315186, 'Can the driver call me?': 0.22189472615718842, 'How do I contact the driver?': 0.3340739905834198, "What if I'm not home?": 0.31350529193878174, 'What is the estimated time for delivery?': 0.23688346147537231, 'What is the ETA?': 0.18591798841953278, 'Can you leave it at the door?': 0.053164005279541016, 'Do you offer contactless delivery?': 0.3033182621002197, 'Can I meet the driver outside?': 0.20027172565460205}
================================================================================

================================================================================
Query: 'Can I order a large pepperoni and how long will it take?'
Expected Intent: order
--------------------------------------------------------------------------------
2025-10-29 10:49:37 [IntentRecognizer] ------------------------------------------------------------
2025-10-29 10:49:37 [IntentRecognizer] Processing: 'Can I order a large pepperoni and how long will it take?'
2025-10-29 10:49:37 [IntentRecognizer] ------------------------------------------------------------
2025-10-29 10:49:37 [Algorithmic] Candidate intents: ['order', 'delivery', 'general', 'menu_inquiry', 'complaint', 'hours_location']
2025-10-29 10:49:37 [boostEngine] Order action boost: 0.591 -> 0.791
2025-10-29 10:49:37 [boostEngine] Delivery status boost: 0.460 -> 0.710
2025-10-29 10:49:37 [boostEngine] Order penalty for status query: 0.791 -> 0.641
2025-10-29 10:49:37 [Algorithmic] delivery (0.710, medium, keyword + levenshtein)
2025-10-29 10:49:37 [IntentRecognizer] ✓ ACCEPTED ALGORITHMIC Layer: delivery (0.710, medium)

FINAL RESULT:
  Predicted: delivery
  Confidence: 0.710
  Layer: algorithmic
  Match: ✗ INCORRECT

  Score Breakdown:
    keyword_similarity: 0.270
    exact_overlap: 0.214
    synonym_similarity: 0.400
    levenshtein_similarity: 0.390
    phrase_bonus: 0.050
    keyword_bonus: 0.080
    base_score: 0.330
    final_score: 0.460
================================================================================

Incorrect Predictions:
  'Can you take my order?'
    Expected: order, Got: delivery (algorithmic, conf=0.78)
  'The delivery took forever'
    Expected: complaint, Got: delivery (semantic, conf=0.68)
  'Do you have late night hours?'
    Expected: hours_location, Got: delivery (algorithmic, conf=0.95)
  'How do I get to your location'
    Expected: hours_location, Got: delivery (semantic, conf=0.50)
  'Can I order a large pepperoni and how long will it take?'
    Expected: order, Got: delivery (algorithmic, conf=0.71)

