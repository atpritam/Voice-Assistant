
================================================================================
INCORRECT PREDICTIONS WITH DETAILED LOGGING
================================================================================

2026-01-06 14:46:01 [IntentRecognizer]  Algorithmic layer initialized
2026-01-06 14:46:01 [Semantic] Loading Sentence Transformer model on device: GPU
2026-01-06 14:46:03 [cache_manager] Loaded embeddings from cache for 6 intents, total patterns: 289
2026-01-06 14:46:03 [IntentRecognizer]  Semantic layer initialized (model: all-mpnet-base-v2)
2026-01-06 14:46:03 [LLM] Connected to local Ollama model at http://localhost:11434.
2026-01-06 14:46:03 [LLM] Using model: llama3.2:3b-instruct-q4_K_M
2026-01-06 14:46:03 [IntentRecognizer]  LLM layer initialized (Ollama-Local, model: llama3.2:3b-instruct-q4_K_M)

Configuration:
  Algorithmic: True
  Semantic: True
  LLM: True
  Algorithmic Threshold: 0.65
  Semantic Threshold: 0.5
  Semantic Model: all-mpnet-base-v2
  LLM Backend: Ollama
  LLM Model: llama3.2:3b-instruct-q4_K_M
  Boost Engine: True
  Edge Cases: True

Test Dataset Size: 400 queries


--------------------------------------------------------------------------------
Query: 'Driver still hasn't shown up'
Expected Intent: complaint
--------------------------------------------------------------------------------

2026-01-06 14:46:08 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:08 [IntentRecognizer] Processing: 'Driver still hasn't shown up'
2026-01-06 14:46:08 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:08 [Algorithmic] Candidate intents: ['complaint', 'delivery', 'hours_location']
2026-01-06 14:46:08 [Algorithmic] unknown (0.100, low, keyword + levenshtein)
2026-01-06 14:46:08 [IntentRecognizer]   - Proceeding to Semantic layer
2026-01-06 14:46:08 [Semantic] delivery (0.621, medium)
2026-01-06 14:46:08 [IntentRecognizer] ✓ ACCEPTED SEMANTIC Layer: delivery (0.621, medium)

FINAL RESULT:
  Predicted: delivery
  Confidence: 0.621
  Layer: semantic
  Match: ✗ INCORRECT

  Score Breakdown:
    semantic_similarity: 0.621
    matched_pattern: Where's the driver?
    top_k_patterns: ["Where's the driver?", 'Where is the driver?', 'Can I see where the driver is?']
    top_k_scores: [0.641, 0.641, 0.540]
    all_similarities: {'What are your delivery options?': 0.086, 'How long does delivery take?': 0.232, 'What's the delivery time?': 0.224, 'Can I track my order?': 0.095, 'Where is my order?': 0.243, 'What's my order status?': 0.243, 'Do you have free delivery?': 0.098, 'How do I track my delivery?': 0.151, 'What's the minimum order for delivery?': 0.135, 'Do you deliver to my area?': 0.084, 'How much is delivery?': 0.115, 'Is my order on the way?': 0.159, 'When will my order arrive?': 0.243, 'What is the status of my order delivery?': 0.297, 'Track my pizza': 0.103, 'Where is my pizza?': 0.245, 'Where's the driver?': 0.641, 'When can I expect it to arrive?': 0.303, 'How long until my order arrives?': 0.261, 'What's the estimated delivery time?': 0.201, 'Can you check on my delivery?': 0.201, 'Where is the driver?': 0.641, 'Do you do late night delivery?': 0.103, 'i need it delivered to my house': 0.083, 'How much longer for delivery?': 0.236, 'I’m still waiting for my order': 0.285, 'How long is delivery usually?': 0.239, 'What's the delivery fee?': 0.083, 'Do you charge for delivery?': 0.107, 'can I get that delivered?': 0.086, 'Is delivery free over a certain amount?': 0.009, 'What's your delivery range?': 0.099, 'Are you in my delivery zone?': 0.060, 'Delivery time estimate': 0.183, 'What's the minimum order value?': 0.012, 'Is there a delivery minimum?': 0.107, 'Do you have real-time tracking?': 0.185, 'Can I see where the driver is?': 0.540, 'What's the fastest delivery option?': 0.138, 'Can I cancel my delivery?': 0.142, 'When will I get it?': 0.220, 'Is delivery available during holidays?': 0.055, 'What payment methods for delivery?': 0.053, 'I gave the wrong address': 0.174, 'Update my delivery location': 0.120, 'Can the driver call me?': 0.314, 'How do I contact the driver?': 0.491, 'What if I'm not home?': 0.100, 'What is the estimated time for delivery?': 0.200, 'What is the ETA?': 0.183, 'Can you leave it at the door?': 0.055, 'Do you offer contactless delivery?': 0.051, 'Can I meet the driver outside?': 0.308}
================================================================================


--------------------------------------------------------------------------------
Query: 'What's your best seller?'
Expected Intent: menu_inquiry
--------------------------------------------------------------------------------

2026-01-06 14:46:09 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:09 [IntentRecognizer] Processing: 'What's your best seller?'
2026-01-06 14:46:09 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:09 [Algorithmic] Candidate intents: ['delivery', 'menu_inquiry', 'hours_location', 'complaint', 'general', 'order']
2026-01-06 14:46:09 [Algorithmic] hours_location (0.747, medium, levenshtein)
2026-01-06 14:46:09 [IntentRecognizer] ✓ ACCEPTED ALGORITHMIC Layer: hours_location (0.747, medium)

FINAL RESULT:
  Predicted: hours_location
  Confidence: 0.747
  Layer: algorithmic
  Match: ✗ INCORRECT

  Score Breakdown:
    keyword_similarity: 0.406
    exact_overlap: 0.500
    synonym_similarity: 0.188
    levenshtein_similarity: 0.727
    phrase_bonus: 0.100
    keyword_bonus: 0.080
    base_score: 0.567
    final_score: 0.747
    pre_boost_winner: hours_location
    pre_boost_winner_score: 0.747
    current_winner_pre_boost_score: 0.747
    boost_delta: 0.000
    winner_changed: False
================================================================================


--------------------------------------------------------------------------------
Query: 'How much would it cost to get my cold pizza replaced?'
Expected Intent: complaint
--------------------------------------------------------------------------------

2026-01-06 14:46:12 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:12 [IntentRecognizer] Processing: 'How much would it cost to get my cold pizza replaced?'
2026-01-06 14:46:12 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:12 [Algorithmic] Candidate intents: ['order', 'complaint', 'delivery', 'menu_inquiry', 'hours_location', 'general']
2026-01-06 14:46:12 [boostEngine] Negative sentiment boost (x2) [complaint]: 0.143 -> 0.493
2026-01-06 14:46:12 [boostEngine] Menu inquiry penalty (negative+price) [menu_inquiry]: 0.554 -> 0.404
2026-01-06 14:46:12 [Algorithmic] complaint (0.493, low, keyword + levenshtein + boost [+0.35])
2026-01-06 14:46:12 [IntentRecognizer]   - Proceeding to Semantic layer
2026-01-06 14:46:12 [Semantic] menu_inquiry (0.652, medium)
2026-01-06 14:46:12 [IntentRecognizer] ✓ ACCEPTED SEMANTIC Layer: menu_inquiry (0.652, medium)

FINAL RESULT:
  Predicted: menu_inquiry
  Confidence: 0.652
  Layer: semantic
  Match: ✗ INCORRECT

  Score Breakdown:
    semantic_similarity: 0.652
    matched_pattern: How much does a pizza cost?
    top_k_patterns: ['How much does a pizza cost?', 'How much is a large pizza?', 'What’s your most ordered pizza?']
    top_k_scores: [0.715, 0.640, 0.513]
    all_similarities: {'What's on the menu?': 0.223, 'Can I see the pizza menu?': 0.396, 'What pizzas do you have?': 0.508, 'Do you have specialty pizzas?': 0.429, 'Do you have vegan options?': 0.153, 'What pizza sizes do you offer?': 0.481, 'What toppings do you have?': 0.340, 'Do you have any deals and specials?': 0.100, 'What crust options are available?': 0.216, 'Do you have gluten free options?': 0.115, 'Are there vegan options?': 0.102, 'What are your prices?': 0.207, 'How much does a pizza cost?': 0.715, 'Do you have any promotions?': 0.039, 'How much is a large pizza?': 0.640, 'What special offers do you have?': 0.121, 'Do you have anything spicy?': 0.214, 'Tell me your menu': 0.233, 'What can I order?': 0.242, 'What’s your most ordered pizza?': 0.513, 'What do you sell?': 0.122, 'what do you have?': 0.171, 'Tell me your options': 0.141, 'what drinks are available': 0.163, 'Do you have kids meals?': 0.234, 'What types of pizza do you make?': 0.470, 'Do you have vegetarian pizzas?': 0.412, 'What meat toppings are available?': 0.283, 'What sides go well with pizza?': 0.353, 'Do you offer chicken as a topping?': 0.232, 'What vegetables can I add?': 0.129, 'Any special pizzas today?': 0.444, 'Can I see a list of toppings?': 0.257, 'Do you serve garlic bread?': 0.262, 'What are your signature pizzas?': 0.421, 'What's the biggest pizza you make?': 0.490, 'Do you have a BBQ pizza?': 0.469, 'What's your most popular pizza?': 0.432, 'Do you serve pasta?': 0.223, 'What sides do you have?': 0.053, 'Do you have appetizers?': 0.224, 'what do you recommend?': 0.079, 'What desserts are available?': 0.146, 'What's the price range?': 0.241, 'Can I customize my pizza?': 0.506, 'Do you have dairy-free cheese?': 0.207, 'Is there a low-carb option?': 0.112, 'What cheese varieties do you use?': 0.229, 'Can I get different cheese?': 0.320, 'Do you use mozzarella?': 0.260, 'What's your Hawaiian pizza made of?': 0.408, 'Tell me about your supreme pizza': 0.498, 'What's in a margherita?': 0.126, 'Describe your meat lovers pizza': 0.383, 'What goes on a veggie pizza?': 0.429}
================================================================================


--------------------------------------------------------------------------------
Query: 'Can I order a large pepperoni and how long will it take?'
Expected Intent: order
--------------------------------------------------------------------------------

2026-01-06 14:46:12 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:12 [IntentRecognizer] Processing: 'Can I order a large pepperoni and how long will it take?'
2026-01-06 14:46:12 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:12 [Algorithmic] Candidate intents: ['order', 'delivery', 'menu_inquiry', 'complaint', 'hours_location', 'general']
2026-01-06 14:46:12 [boostEngine] Order action boost [order]: 0.621 -> 0.771
2026-01-06 14:46:12 [boostEngine] Delivery status boost [delivery]: 0.457 -> 0.657
2026-01-06 14:46:12 [boostEngine] Order penalty for status query [order]: 0.771 -> 0.621
2026-01-06 14:46:12 [Algorithmic] delivery (0.657, medium, keyword + levenshtein + boost [+0.20])
2026-01-06 14:46:12 [IntentRecognizer] ✓ ACCEPTED ALGORITHMIC Layer: delivery (0.657, medium)

FINAL RESULT:
  Predicted: delivery
  Confidence: 0.657
  Layer: algorithmic
  Match: ✗ INCORRECT

  Score Breakdown:
    keyword_similarity: 0.265
    exact_overlap: 0.214
    synonym_similarity: 0.382
    levenshtein_similarity: 0.390
    phrase_bonus: 0.050
    keyword_bonus: 0.080
    base_score: 0.327
    final_score: 0.457
    pre_boost_winner: order
    pre_boost_winner_score: 0.621
    current_winner_pre_boost_score: 0.457
    boost_delta: 0.200
    winner_changed: True
================================================================================


--------------------------------------------------------------------------------
Query: 'I want to order but is delivery free?'
Expected Intent: delivery
--------------------------------------------------------------------------------

2026-01-06 14:46:12 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:12 [IntentRecognizer] Processing: 'I want to order but is delivery free?'
2026-01-06 14:46:12 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:12 [Algorithmic] Candidate intents: ['delivery', 'hours_location', 'complaint', 'menu_inquiry', 'order', 'general']
2026-01-06 14:46:12 [Algorithmic] Candidate intents: ['order', 'delivery', 'complaint', 'hours_location', 'menu_inquiry', 'general']
2026-01-06 14:46:12 [boostEngine] Order action boost [order]: 0.934 -> 1.000
2026-01-06 14:46:12 [Algorithmic] order (1.000, high, levenshtein)
2026-01-06 14:46:12 [IntentRecognizer] ✓ ACCEPTED ALGORITHMIC Layer: order (1.000, high)

FINAL RESULT:
  Predicted: order
  Confidence: 1.000
  Layer: algorithmic
  Match: ✗ INCORRECT

  Score Breakdown:
    keyword_similarity: 0.648
    exact_overlap: 0.556
    synonym_similarity: 0.862
    levenshtein_similarity: 0.781
    phrase_bonus: 0.100
    keyword_bonus: 0.120
    base_score: 0.714
    final_score: 0.934
================================================================================


--------------------------------------------------------------------------------
Query: 'Can I order now or are you closed?'
Expected Intent: hours_location
--------------------------------------------------------------------------------

2026-01-06 14:46:12 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:12 [IntentRecognizer] Processing: 'Can I order now or are you closed?'
2026-01-06 14:46:12 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:12 [Algorithmic] Candidate intents: ['hours_location', 'order', 'complaint', 'delivery', 'menu_inquiry', 'general']
2026-01-06 14:46:12 [boostEngine] Order action boost [order]: 0.673 -> 0.823
2026-01-06 14:46:12 [Algorithmic] order (0.823, high, keyword + levenshtein + boost [+0.15])
2026-01-06 14:46:12 [IntentRecognizer] ✓ ACCEPTED ALGORITHMIC Layer: order (0.823, high)

FINAL RESULT:
  Predicted: order
  Confidence: 0.823
  Layer: algorithmic
  Match: ✗ INCORRECT

  Score Breakdown:
    keyword_similarity: 0.405
    exact_overlap: 0.300
    synonym_similarity: 0.650
    levenshtein_similarity: 0.582
    phrase_bonus: 0.100
    keyword_bonus: 0.080
    base_score: 0.493
    final_score: 0.673
    pre_boost_winner: order
    pre_boost_winner_score: 0.673
    current_winner_pre_boost_score: 0.673
    boost_delta: 0.150
    winner_changed: False
================================================================================


--------------------------------------------------------------------------------
Query: 'I don't like thick crust do you have thin'
Expected Intent: menu_inquiry
--------------------------------------------------------------------------------

2026-01-06 14:46:12 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:12 [IntentRecognizer] Processing: 'I don't like thick crust do you have thin'
2026-01-06 14:46:12 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:12 [Algorithmic] Candidate intents: ['menu_inquiry', 'order', 'complaint', 'general', 'delivery', 'hours_location']
2026-01-06 14:46:12 [Algorithmic] menu_inquiry (0.648, medium, keyword + levenshtein)
2026-01-06 14:46:12 [IntentRecognizer]   - Proceeding to Semantic layer
2026-01-06 14:46:12 [Semantic] order (0.640, medium)
2026-01-06 14:46:12 [IntentRecognizer] ✓ ACCEPTED SEMANTIC Layer: order (0.640, medium)

FINAL RESULT:
  Predicted: order
  Confidence: 0.640
  Layer: semantic
  Match: ✗ INCORRECT

  Score Breakdown:
    semantic_similarity: 0.640
    matched_pattern: I want a thick crust pepperoni
    top_k_patterns: ['I want a thick crust pepperoni', 'Can I get a thin crust pizza', 'Can I get a medium pizza?']
    top_k_scores: [0.688, 0.671, 0.475]
    all_similarities: {'I want to order a pizza': 0.317, 'I'd like to place an order': 0.169, 'Can I order a pizza?': 0.352, 'I'd like to order something': 0.169, 'I want a pizza': 0.358, 'take my order': 0.148, 'I'll order the salami pizza': 0.332, 'Add a drink to my order': 0.152, 'I'd like a large pepperoni pizza': 0.361, 'Can I get a medium pizza?': 0.475, 'Make that two mediums': 0.218, 'I would like a small pizza': 0.427, 'I want to buy a pizza': 0.311, 'Can I purchase a pizza': 0.314, 'I'd like to make an order': 0.204, 'Get me your best pizza': 0.333, 'Place an order for me': 0.139, 'Start a new order': 0.083, 'I want to order for delivery': 0.103, 'Can I order for pickup': 0.062, 'I need to order a pizza': 0.287, 'I’ll take one pepperoni pizza': 0.272, 'Let me order a pizza': 0.306, 'I want to get a pizza': 0.320, 'Can I buy two pizzas': 0.309, 'I'm ready to order': 0.166, 'Let's order a pizza': 0.320, 'Get me the combo deal': 0.076, 'Can I start ordering': 0.109, 'I want to add a pizza to my order': 0.368, 'Get me a large supreme pizza': 0.284, 'I'll order a Hawaiian pizza': 0.312, 'Make an order for pickup': 0.068, 'I'm looking to get some food': 0.162, 'I will get my usual': 0.185, 'I'd like to buy some pizzas': 0.289, 'Order a family size pizza': 0.336, 'I need two medium pizzas with extra cheese': 0.457, 'Can I get a thin crust pizza': 0.671, 'I want a thick crust pepperoni': 0.688, 'can you make it less spicy?': 0.271, 'Order me a stuffed crust pizza': 0.467, 'I'd like a gluten free pizza': 0.387, 'Can I order a vegan pizza': 0.295}
================================================================================


--------------------------------------------------------------------------------
Query: 'The delivery took forever'
Expected Intent: complaint
--------------------------------------------------------------------------------

2026-01-06 14:46:13 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:13 [IntentRecognizer] Processing: 'The delivery took forever'
2026-01-06 14:46:13 [IntentRecognizer] ------------------------------------------------------------
2026-01-06 14:46:13 [Algorithmic] Candidate intents: ['delivery', 'complaint', 'hours_location', 'order', 'menu_inquiry']
2026-01-06 14:46:13 [Algorithmic] delivery (0.544, low, keyword + levenshtein)
2026-01-06 14:46:13 [IntentRecognizer]   - Proceeding to Semantic layer
2026-01-06 14:46:13 [Semantic] delivery (0.693, medium)
2026-01-06 14:46:13 [IntentRecognizer] ✓ ACCEPTED SEMANTIC Layer: delivery (0.693, medium)

FINAL RESULT:
  Predicted: delivery
  Confidence: 0.693
  Layer: semantic
  Match: ✗ INCORRECT

  Score Breakdown:
    semantic_similarity: 0.693
    matched_pattern: How much longer for delivery?
    top_k_patterns: ['How much longer for delivery?', 'How long does delivery take?', 'How long is delivery usually?']
    top_k_scores: [0.706, 0.686, 0.671]
    all_similarities: {'What are your delivery options?': 0.493, 'How long does delivery take?': 0.686, 'What's the delivery time?': 0.616, 'Can I track my order?': 0.245, 'Where is my order?': 0.409, 'What's my order status?': 0.311, 'Do you have free delivery?': 0.425, 'How do I track my delivery?': 0.399, 'What's the minimum order for delivery?': 0.520, 'Do you deliver to my area?': 0.349, 'How much is delivery?': 0.524, 'Is my order on the way?': 0.428, 'When will my order arrive?': 0.493, 'What is the status of my order delivery?': 0.525, 'Track my pizza': 0.219, 'Where is my pizza?': 0.344, 'Where's the driver?': 0.187, 'When can I expect it to arrive?': 0.514, 'How long until my order arrives?': 0.516, 'What's the estimated delivery time?': 0.598, 'Can you check on my delivery?': 0.531, 'Where is the driver?': 0.187, 'Do you do late night delivery?': 0.394, 'i need it delivered to my house': 0.435, 'How much longer for delivery?': 0.706, 'I’m still waiting for my order': 0.575, 'How long is delivery usually?': 0.671, 'What's the delivery fee?': 0.423, 'Do you charge for delivery?': 0.414, 'can I get that delivered?': 0.439, 'Is delivery free over a certain amount?': 0.361, 'What's your delivery range?': 0.424, 'Are you in my delivery zone?': 0.399, 'Delivery time estimate': 0.609, 'What's the minimum order value?': 0.056, 'Is there a delivery minimum?': 0.512, 'Do you have real-time tracking?': 0.169, 'Can I see where the driver is?': 0.028, 'What's the fastest delivery option?': 0.616, 'Can I cancel my delivery?': 0.518, 'When will I get it?': 0.341, 'Is delivery available during holidays?': 0.448, 'What payment methods for delivery?': 0.316, 'I gave the wrong address': 0.303, 'Update my delivery location': 0.368, 'Can the driver call me?': 0.124, 'How do I contact the driver?': 0.188, 'What if I'm not home?': 0.163, 'What is the estimated time for delivery?': 0.595, 'What is the ETA?': 0.290, 'Can you leave it at the door?': 0.158, 'Do you offer contactless delivery?': 0.343, 'Can I meet the driver outside?': 0.115}
================================================================================


================================================================================
SUMMARY
================================================================================

Test Dataset Size: 400 queries
Accuracy: 98.00%
Correct: 392 / 400

Incorrect Predictions (8):
  'Driver still hasn't shown up'
    Expected: complaint, Got: delivery (semantic, conf=0.62)
  'What's your best seller?'
    Expected: menu_inquiry, Got: hours_location (algorithmic, conf=0.75)
  'How much would it cost to get my cold pizza replaced?'
    Expected: complaint, Got: menu_inquiry (semantic, conf=0.65)
  'Can I order a large pepperoni and how long will it take?'
    Expected: order, Got: delivery (algorithmic, conf=0.66)
  'I want to order but is delivery free?'
    Expected: delivery, Got: order (algorithmic, conf=1.00)
  'Can I order now or are you closed?'
    Expected: hours_location, Got: order (algorithmic, conf=0.82)
  'I don't like thick crust do you have thin'
    Expected: menu_inquiry, Got: order (semantic, conf=0.64)
  'The delivery took forever'
    Expected: complaint, Got: delivery (semantic, conf=0.69)